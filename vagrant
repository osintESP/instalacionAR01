Vagrant.configure("2") do |config|
  config.vm.box = "archlinux/archlinux"
  config.vm.hostname = "Osintesp"
  config.vm.provider "virtualbox" do |vb|
    vb.memory = 4096
    vb.cpus = 2
    vb.gui = true
  end

  config.vm.provision "shell", inline: <<-SHELL
    # Install Xorg and XFCE4 desktop environment
    sudo pacman -Syu --noconfirm xorg-server xorg-xinit xorg-xrandr xfce4 xfce4-goodies

    # Check if XFCE4 is installed
    if ! pacman -Qs xfce4 > /dev/null; then
      echo "XFCE4 not installed. Aborting..."
      exit 1
    fi

    # Restart VM
    sudo reboot
    sleep 60
  SHELL
end
